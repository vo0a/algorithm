## 626. Exchange Seats

> Medium

[문제](https://leetcode.com/problems/exchange-seats/)



```sql
with `last` as (
    select *
    from seat
    order by id desc limit 1
)


(
    select id, student
    from(
        (
            select  a.id, b.student
            from seat a join seat b on a.id + 1 = b.id
            where a.id % 2 != 0
        )
        union
        (
            select  b.id, a.student
            from seat a join seat b on a.id + 1 = b.id
            where a.id % 2 != 0
        )
        order by id
    ) A
)
union
(
    select *
    from `last`
    where id % 2 != 0
)
```

- 인접한 위치에 있는 학생들의 id를 뒤바꿔 출력하기
- 만약 학생이 홀수명있다면 마지막 친구는 id를 바꾸지 않고 그냥 출력되어야 함

### 풀이방법

1. id가 홀수인애들 기준으로 `a.id, b.student`, `b.id, a.student` 를 출력하고 합집합 후 정렬해서 출력했다.
2. 이렇게하면 짝수명까지는 모두 나오게 되는데, 전체 인원 수가 홀수였다면 마지막 친구는 따로 출력을 해야해서 1번의 결과를 한 번 더 감싸고 union 을 또 했다.
   - 가상테이블 `last`을 둬서 마지막 친구의 id와 이름을 알게 했고
   - 마지막 친구의 id가 홀수라면 출력되도록 했다.